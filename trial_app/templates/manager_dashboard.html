{% extends "layout.html" %}

{% block content %}
    <h1>Manager Dashboard</h1>
    <p>Welcome, {{ session.username }}!</p>

    <div class="card">
        <h2>Live Zoo Operations</h2>
        <h3 style="font-weight: normal;">
            Current Animals: 
            <strong style="font-size: 1.5em;">{{ animal_count }}</strong>
        </h3>
        <h3 style="font-weight: normal;">
            Total Zoo Capacity: 
            <strong style="font-size: 1.5em;">{{ total_capacity }}</strong>
        </h3>
    </div>
    <div class="card">
        <h2>Ticket Sales Report (By Day)</h2>
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Average Price</th>
                    <th>Tickets Sold</th>
                </tr>
            </thead>
            <tbody>
                {% for row in ticket_report %}
                <tr>
                    <td>{{ row.date }}</td>
                    <td>${{ "%.2f"|format(row.average_price) }}</td>
                    <td>{{ row.tickets_sold }}</td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="3">No ticket data found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}