{% extends "layout.html" %}

{% block content %}
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h1>Visitor Management</h1>
        <!-- This button links to our Nested Query page -->
        <a href="{{ url_for('visitors_unvisited') }}" class="btn" style="background-color:#17a2b8;">
            Show Visitors Who Haven't Visited
        </a>
    </div>

    <div class="card">
        <h2>All Visitors</h2>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Age</th>
                    <th>Phone</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- We will pass the 'visitors' list from app.py -->
                {% for visitor in visitors %}
                <tr>
                    <td>{{ visitor.visitor_id }}</td>
                    <td>{{ visitor.f_name }}</td>
                    <td>{{ visitor.l_name }}</td>
                    <td>{{ visitor.age }}</td>
                    <td>{{ visitor.phone_no }}</td>
                    <td>
                        <!-- This links to our "Update" page -->
                        <a href="{{ url_for('edit_visitor', visitor_id=visitor.visitor_id) }}" class="btn btn-success">Edit</a>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="6">No visitors found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
